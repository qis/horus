cmake_minimum_required(VERSION 3.23 FATAL_ERROR)
project(opencv DESCRIPTION "OpenCV" LANGUAGES C CXX)

set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} /MD" CACHE STRING "" FORCE)
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /MD" CACHE STRING "" FORCE)

list(PREPEND CMAKE_MODULE_PATH ${CMAKE_CURRENT_SOURCE_DIR}/..)

find_package(Freetype REQUIRED)
set(FREETYPE_INCLUDE_DIRS ${Freetype_INCLUDE_DIRS} CACHE STRING "" FORCE)
set(FREETYPE_LIBRARIES ${Freetype_LIBRARIES} CACHE STRING "" FORCE)
set(FREETYPE_LIBRARIES_HORUS ${Freetype_LIBRARIES})

find_package(harfbuzz REQUIRED)
set(HARFBUZZ_INCLUDE_DIRS ${harfbuzz_INCLUDE_DIRS} CACHE STRING "" FORCE)
set(HARFBUZZ_LIBRARIES ${harfbuzz_LIBRARIES} CACHE STRING "" FORCE)
set(HARFBUZZ_LIBRARIES_HORUS ${harfbuzz_LIBRARIES})

add_subdirectory(src)

target_link_libraries(opencv_world PRIVATE ${FREETYPE_LIBRARIES_HORUS})
target_link_libraries(opencv_world PRIVATE ${HARFBUZZ_LIBRARIES_HORUS})
